!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.deck=n():e.deck=n()}(window,(function(){return function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=6)}([function(e,n){function r(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(n)}e.exports=r},function(e,n){function r(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}e.exports=function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}},function(e,n){e.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}},function(e,n){e.exports=function(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}},function(e,n,r){const t=r(10),o={"||":function(e,n){return e||n},"&&":function(e,n){return e&&n},"|":function(e,n){return e|n},"^":function(e,n){return e^n},"&":function(e,n){return e&n},"==":function(e,n){return e==n},"!=":function(e,n){return e!=n},"===":function(e,n){return e===n},"!==":function(e,n){return e!==n},"<":function(e,n){return e<n},">":function(e,n){return e>n},"<=":function(e,n){return e<=n},">=":function(e,n){return e>=n},"<<":function(e,n){return e<<n},">>":function(e,n){return e>>n},">>>":function(e,n){return e>>>n},"+":function(e,n){return e+n},"-":function(e,n){return e-n},"*":function(e,n){return e*n},"/":function(e,n){return e/n},"%":function(e,n){return e%n}},i={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function u(e,n){return e.map((function(e){return f(e,n)}))}async function a(e,n){return await Promise.all(e.map(e=>l(e,n)))}function s(e,n){const r=f(e.object,n);return e.computed?[r,r[f(e.property,n)]]:[r,r[e.property.name]]}async function c(e,n){const r=await l(e.object,n);return e.computed?[r,r[await l(e.property,n)]]:[r,r[e.property.name]]}function f(e,n){switch(e.type){case"ArrayExpression":return u(e.elements,n);case"BinaryExpression":return o[e.operator](f(e.left,n),f(e.right,n));case"CallExpression":let r,t,a;if("MemberExpression"===e.callee.type?(a=s(e.callee,n),r=a[0],t=a[1]):t=f(e.callee,n),"function"!=typeof t)return;return t.apply(r,u(e.arguments,n));case"ConditionalExpression":return f(e.test,n)?f(e.consequent,n):f(e.alternate,n);case"Identifier":return n[e.name];case"Literal":return e.value;case"LogicalExpression":return"||"===e.operator?f(e.left,n)||f(e.right,n):"&&"===e.operator?f(e.left,n)&&f(e.right,n):o[e.operator](f(e.left,n),f(e.right,n));case"MemberExpression":return s(e,n)[1];case"ThisExpression":return n;case"UnaryExpression":return i[e.operator](f(e.argument,n));default:return}}async function l(e,n){switch(e.type){case"ArrayExpression":return await a(e.elements,n);case"BinaryExpression":{const[r,t]=await Promise.all([l(e.left,n),l(e.right,n)]);return o[e.operator](r,t)}case"CallExpression":let r,t,u;if("MemberExpression"===e.callee.type?(u=await c(e.callee,n),r=u[0],t=u[1]):t=await l(e.callee,n),"function"!=typeof t)return;return await t.apply(r,await a(e.arguments,n));case"ConditionalExpression":return await l(e.test,n)?await l(e.consequent,n):await l(e.alternate,n);case"Identifier":return n[e.name];case"Literal":return e.value;case"LogicalExpression":{if("||"===e.operator)return await l(e.left,n)||await l(e.right,n);if("&&"===e.operator)return await l(e.left,n)&&await l(e.right,n);const[r,t]=await Promise.all([l(e.left,n),l(e.right,n)]);return o[e.operator](r,t)}case"MemberExpression":return(await c(e,n))[1];case"ThisExpression":return n;case"UnaryExpression":return i[e.operator](await l(e.argument,n));default:return}}e.exports={parse:t,eval:f,evalAsync:l,compile:function(e){return f.bind(null,t(e))},compileAsync:function(e){return l.bind(null,t(e))}}},function(e,n,r){var t=r(7),o=r(8),i=r(9);e.exports=function(e,n){return t(e)||o(e,n)||i()}},function(e,n,r){var t=r(11),o=("undefined"==typeof window?global:window).deck||{};if(!o.Layer)throw new Error("@deck.gl/core is not found");e.exports=Object.assign(o,t)},function(e,n){e.exports=function(e){if(Array.isArray(e))return e}},function(e,n){e.exports=function(e,n){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);t=!0);}catch(e){o=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return r}}},function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,n,r){!function(r){"use strict";var t=function(e,n){var r=new Error(e+" at character "+n);throw r.index=n,r.description=e,r},o={"-":!0,"!":!0,"~":!0,"+":!0},i={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},u=function(e){var n,r=0;for(var t in e)(n=t.length)>r&&e.hasOwnProperty(t)&&(r=n);return r},a=u(o),s=u(i),c={true:!0,false:!1,null:null},f=function(e){return i[e]||0},l=function(e,n,r){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:n,right:r}},p=function(e){return e>=48&&e<=57},y=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!i[String.fromCharCode(e)]},h=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!i[String.fromCharCode(e)]},v=function(e){for(var n,r,u=0,v=e.charAt,d=e.charCodeAt,g=function(n){return v.call(e,n)},b=function(n){return d.call(e,n)},m=e.length,x=function(){for(var e=b(u);32===e||9===e||10===e||13===e;)e=b(++u)},w=function(){var e,n,r=j();return x(),63!==b(u)?r:(u++,(e=w())||t("Expected expression",u),x(),58===b(u)?(u++,(n=w())||t("Expected expression",u),{type:"ConditionalExpression",test:r,consequent:e,alternate:n}):void t("Expected :",u))},O=function(){x();for(var n=e.substr(u,s),r=n.length;r>0;){if(i.hasOwnProperty(n)&&(!y(b(u))||u+n.length<e.length&&!h(b(u+n.length))))return u+=r,n;n=n.substr(0,--r)}return!1},j=function(){var e,n,r,o,i,a,s,c;if(a=E(),!(n=O()))return a;for(i={value:n,prec:f(n)},(s=E())||t("Expected expression after "+n,u),o=[a,i,s];(n=O())&&0!==(r=f(n));){for(i={value:n,prec:r};o.length>2&&r<=o[o.length-2].prec;)s=o.pop(),n=o.pop().value,a=o.pop(),e=l(n,a,s),o.push(e);(e=E())||t("Expected expression after "+n,u),o.push(i,e)}for(e=o[c=o.length-1];c>1;)e=l(o[c-1].value,o[c-2],e),c-=2;return e},E=function(){var n,r,t;if(x(),n=b(u),p(n)||46===n)return P();if(39===n||34===n)return S();if(91===n)return M();for(t=(r=e.substr(u,a)).length;t>0;){if(o.hasOwnProperty(r)&&(!y(b(u))||u+r.length<e.length&&!h(b(u+r.length))))return u+=t,{type:"UnaryExpression",operator:r,argument:E(),prefix:!0};r=r.substr(0,--t)}return!(!y(n)&&40!==n)&&A()},P=function(){for(var e,n,r="";p(b(u));)r+=g(u++);if(46===b(u))for(r+=g(u++);p(b(u));)r+=g(u++);if("e"===(e=g(u))||"E"===e){for(r+=g(u++),"+"!==(e=g(u))&&"-"!==e||(r+=g(u++));p(b(u));)r+=g(u++);p(b(u-1))||t("Expected exponent ("+r+g(u)+")",u)}return n=b(u),y(n)?t("Variable names cannot start with a number ("+r+g(u)+")",u):46===n&&t("Unexpected period",u),{type:"Literal",value:parseFloat(r),raw:r}},S=function(){for(var e,n="",r=g(u++),o=!1;u<m;){if((e=g(u++))===r){o=!0;break}if("\\"===e)switch(e=g(u++)){case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:n+=e}else n+=e}return o||t('Unclosed quote after "'+n+'"',u),{type:"Literal",value:n,raw:r+n+r}},k=function(){var n,r=b(u),o=u;for(y(r)?u++:t("Unexpected "+g(u),u);u<m&&(r=b(u),h(r));)u++;return n=e.slice(o,u),c.hasOwnProperty(n)?{type:"Literal",value:c[n],raw:n}:"this"===n?{type:"ThisExpression"}:{type:"Identifier",name:n}},C=function(e){for(var n,r,o=[],i=!1;u<m;){if(x(),(n=b(u))===e){i=!0,u++;break}44===n?u++:((r=w())&&"Compound"!==r.type||t("Expected comma",u),o.push(r))}return i||t("Expected "+String.fromCharCode(e),u),o},A=function(){var e,n;for(n=40===(e=b(u))?J():k(),x(),e=b(u);46===e||91===e||40===e;)u++,46===e?(x(),n={type:"MemberExpression",computed:!1,object:n,property:k()}):91===e?(n={type:"MemberExpression",computed:!0,object:n,property:w()},x(),93!==(e=b(u))&&t("Unclosed [",u),u++):40===e&&(n={type:"CallExpression",arguments:C(41),callee:n}),x(),e=b(u);return n},J=function(){u++;var e=w();if(x(),41===b(u))return u++,e;t("Unclosed (",u)},M=function(){return u++,{type:"ArrayExpression",elements:C(93)}},_=[];u<m;)59===(n=b(u))||44===n?u++:(r=w())?_.push(r):u<m&&t('Unexpected "'+g(u)+'"',u);return 1===_.length?_[0]:{type:"Compound",body:_}};v.version="0.3.4",v.toString=function(){return"JavaScript Expression Parser (JSEP) v"+v.version},v.addUnaryOp=function(e){return a=Math.max(e.length,a),o[e]=!0,this},v.addBinaryOp=function(e,n){return s=Math.max(e.length,s),i[e]=n,this},v.addLiteral=function(e,n){return c[e]=n,this},v.removeUnaryOp=function(e){return delete o[e],e.length===a&&(a=u(o)),this},v.removeAllUnaryOps=function(){return o={},a=0,this},v.removeBinaryOp=function(e){return delete i[e],e.length===s&&(s=u(i)),this},v.removeAllBinaryOps=function(){return i={},s=0,this},v.removeLiteral=function(e){return delete c[e],this},v.removeAllLiterals=function(){return c={},this},e.exports?n=e.exports=v:n.parse=v}()},function(e,n,r){"use strict";r.r(n);var t=r(5),o=r.n(t),i=r(3),u=r.n(i),a=r(2),s=r.n(a),c=r(1),f=r.n(c),l=r(0),p=r.n(l);function y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new Error("JSON conversion error ".concat(n))}function h(e,n){var r=function(e){if("string"==typeof e){var n=d[e];return n||(n=e.split("."),d[e]=n),n}return Array.isArray(e)?e:[e]}(n),t=e,o=!0,i=!1,u=void 0;try{for(var a,s=r[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value;t=v(t)?t[c]:void 0}}catch(e){i=!0,u=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw u}}return t}function v(e){return null!==e&&"object"===p()(e)}var d={};var g=r(4),b=r.n(g),m={"-":function(e){return e}};function x(e,n){if(e in m)return m[e];var r,t=b.a.parse(e);return t.right||t.left||"Identifier"!==t.type?(!function e(n,r){if(Array.isArray(n))n.forEach((function(n){return e(n,r)}));else if(n&&"object"===p()(n))for(var t in n.type&&r(n),n)e(n[t],r)}(t,(function(e){if("CallExpression"===e.type)throw new Error("Function calls not allowed in JSON expressions")})),r=function(e){return b.a.eval(t,e)}):r=function(n){return h(n,e)},m[e]=r,r}var w=function(e){return e&&"object"===p()(e)},O=function(){function e(){s()(this,e),this.typeKey="@@type",this.log=console,this.classes={},this.reactComponents={},this.enumerations={},this.constants={},this.convertFunction=j,this.preProcessClassProps=function(e,n){return n},this.postProcessConvertedJson=function(e){return e};for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];for(var o=0,i=r;o<i.length;o++){var u=i[o];this.merge(u)}}return f()(e,[{key:"merge",value:function(e){for(var n in e)switch(n){case"layers":case"views":Object.assign(this.classes,e[n]);break;default:if(n in this){var r=e[n];this[n]=w(this[n])?Object.assign(this[n],r):r}}}},{key:"validate",value:function(e){return y(!this.typeKey||"string"==typeof this.typeKey),y(w(this.classes)),!0}}]),e}();function j(e,n){return x(e)}function E(e){return e.replace("@@=","")}function P(e,n){var r,t={};for(var o in e){var i=e[o];"string"==typeof(r=i)&&r.startsWith("@@=")&&(i=x(i=E(i))),t[o]=i}return t}function S(e,n,r){var t=r.classes[e],o=r.reactComponents[e];if(!t&&!o){var i=r.log,u=JSON.stringify(n,null,0).slice(0,40);return i&&i.warn("JSON converter: No registered class of type ".concat(e,"(").concat(u,"...)  ")),null}return t?function(e,n,r){r.preProcessClassProps&&(n=r.preProcessClassProps(e,n,r));return n=P(n),new e(n)}(t,n,r):function(e,n,r){var t=r.React,o=n.children,i=void 0===o?[]:o;delete n.children,r.preProcessClassProps&&(n=r.preProcessClassProps(e,n,r));return n=P(n),t.createElement(e,n,i)}(o,n,r)}function k(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}var C=function(e){return e&&"object"===p()(e)},A=function(){function e(n){s()(this,e),this.log=console,this.configuration={},this.onJSONChange=function(){},this.json=null,this.convertedJson=null,this.setProps(n)}return f()(e,[{key:"finalize",value:function(){}},{key:"setProps",value:function(e){"configuration"in e&&(this.configuration=e.configuration instanceof O?e.configuration:new O(e.configuration)),"onJSONChange"in e&&(this.onJSONChange=e.onJSONChange)}},{key:"mergeConfiguration",value:function(e){this.configuration.merge(e)}},{key:"convert",value:function(e){if(!e||e===this.json)return this.convertedJson;this.json=e;var n=function(e,n){return n=new O(n),J(e,"",n)}(function(e){return"string"==typeof e?JSON.parse(e):e}(e),this.configuration);return n=this.configuration.postProcessConvertedJson(n),this.convertedJson=n,n}},{key:"convertJson",value:function(e){return this.convert(e)}}]),e}();function J(e,n,r){return Array.isArray(e)?e.map((function(e,n){return J(e,String(n),r)})):function(e,n){var r=n.typeKey;return C(e)&&Boolean(e[r])}(e,r)?function(e,n){var r=n.typeKey,t=e[r],o=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?k(Object(r),!0).forEach((function(n){u()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({},e);return delete o[r],o=M(o,n),S(t,o,n)}(e,r):C(e)?M(e,r):"string"==typeof e?function(e,n,r){if(e.startsWith("@@=")&&r.convertFunction)return e=e.replace("@@=",""),r.convertFunction(e,r);if(e.startsWith("@@#")){if(e=e.replace("@@#",""),r.constants[e])return r.constants[e];var t=e.split("."),i=o()(t,2),u=i[0],a=i[1];return r.enumerations[u][a]}return e}(e,0,r):e}function M(e,n){y(C(e));var r={};for(var t in e){var o=e[t];r[t]=J(o,0,n)}return r}function _(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function N(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_(Object(r),!0).forEach((function(n){u()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var L={onIninitialize:function(e){return e},onFinalize:function(e){return e},onMessage:null},U=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Transport";s()(this,e),this.name=n,this._messageQueue=[],this.userData={}}return f()(e,null,[{key:"setCallbacks",value:function(e){var n=e.onInitialize,r=e.onFinalize,t=e.onMessage;n&&(L.onInitialize=n),r&&(L.onFinalize=r),t&&(L.onMessage=t)}}]),f()(e,[{key:"sendJSONMessage",value:function(){console.error("Back-channel not implemented for this transport")}},{key:"sendBinaryMessage",value:function(){console.error("Back-channel not implemented for this transport")}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=N({transport:this},e);L.onInitialize(n)}},{key:"_finalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=N({transport:this},e);L.onFinalize(n),this._destroyed=!0}},{key:"_messageReceived",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=N({transport:this},e),console.debug("Delivering transport message",e),L.onMessage(e)}}]),e}();function z(e,n){if(e===n)return!0;if("object"!==p()(e)||null===e||"object"!==p()(n)||null===n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var r in e)if(!(r in n)||e[r]!==n[r])return!1;for(var t in n)if(!(t in e))return!1;return!0}r.d(n,"JSONConverter",(function(){return A})),r.d(n,"JSONConfiguration",(function(){return O})),r.d(n,"Transport",(function(){return U})),r.d(n,"_convertFunctions",(function(){return P})),r.d(n,"_parseExpressionString",(function(){return x})),r.d(n,"_shallowEqualObjects",(function(){return z}))}])}));