{"version":3,"file":"Instance.js","sourceRoot":"","sources":["../../../../../src/.internal/core/utils/Instance.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { system } from \"../System\";\r\nimport { registry } from \"../Registry\";\r\nimport { Sprite } from \"../Sprite\";\r\nimport { Container } from \"../Container\";\r\nimport { Component } from \"../Component\";\r\nimport { Paper } from \"../rendering/Paper\";\r\nimport { SVGContainer, svgContainers } from \"../rendering/SVGContainer\";\r\nimport { FocusFilter } from \"../rendering/filters/FocusFilter\";\r\nimport { Preloader } from \"../elements/Preloader\";\r\nimport { AmChartsLogo } from \"../elements/AmChartsLogo\";\r\nimport { ITheme } from \"../../themes/ITheme\";\r\nimport { Tooltip } from \"../elements/Tooltip\";\r\nimport { Disposer, MultiDisposer } from \"../utils/Disposer\";\r\nimport { percent } from \"./Percent\";\r\nimport { options } from \"../Options\";\r\nimport * as $array from \"./Array\";\r\nimport * as $type from \"./Type\";\r\nimport * as $dom from \"./DOM\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $log from \"./Log\";\r\n\r\n/**\r\n * ============================================================================\r\n * INSTANTIATION FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates all HTML and SVG containers needed for the chart instance, as well\r\n * as the new [[Sprite]] (as specified in `classType` parameter).\r\n *\r\n * @param htmlElement  A container to creat elements in\r\n * @param classType    A class definition of the new element to create\r\n * @return Newly-created Sprite object\r\n */\r\nfunction createChild<T extends Sprite>(htmlElement: $type.Optional<HTMLElement | string>, classType: { new(): T; }): T {\r\n\tlet htmlContainer = $dom.getElement(htmlElement);\r\n\r\n\t// If there's no container available yet, we create a fake one\r\n\tlet tmpContainer = false;\r\n\tif (!htmlContainer) {\r\n\t\thtmlContainer = document.createElement(\"div\");\r\n\t\thtmlContainer.style.width = \"200px\";\r\n\t\thtmlContainer.style.height = \"200px\";\r\n\t\thtmlContainer.style.visibility = \"hidden\";\r\n\t\thtmlContainer.style.position = \"absolute\";\r\n\t\tdocument.body.appendChild(htmlContainer);\r\n\t\ttmpContainer = true;\r\n\t}\r\n\r\n\tif (htmlContainer) {\r\n\r\n\t\thtmlContainer.innerHTML = \"\";\r\n\t\t//htmlContainer.style.overflow = \"hidden\";\r\n\r\n\t\tlet svgDiv = new SVGContainer(htmlContainer);\r\n\t\tlet paper = new Paper(svgDiv.SVGContainer, \"svg-\" + (svgContainers.length - 1));\r\n\r\n\t\t// the approach with masks is chosen because overflow:visible is set on SVG element in order tooltips could go outside\r\n\t\t// svg area - this is often needed when working with small charts.\r\n\r\n\t\t// main container which holds content container and tooltips container\r\n\t\tlet container = new Container();\r\n\t\tcontainer.htmlContainer = htmlContainer;\r\n\t\tcontainer.svgContainer = svgDiv;\r\n\t\tcontainer.width = percent(100);\r\n\t\tcontainer.height = percent(100);\r\n\t\tcontainer.background.fillOpacity = 0;\r\n\t\tcontainer.paper = paper;\r\n\t\tpaper.append(container.group);\r\n\r\n\t\t// Set up moving to proper element container if it's not yet ready at call time\r\n\t\tif (tmpContainer) {\r\n\t\t\t$dom.ready(() => {\r\n\t\t\t\tcontainer.moveHtmlContainer(htmlElement);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// this is set from parent container, but this one doesn't have, so do it manually.\r\n\t\tcontainer.relativeWidth = 1;\r\n\t\tcontainer.relativeHeight = 1;\r\n\r\n\t\tsvgDiv.container = container;\r\n\r\n\t\t// creating classType instance\r\n\t\tlet sprite = container.createChild(classType);\r\n\t\tsprite.topParent = container;\r\n\t\tlet uid = sprite.uid;\r\n\r\n\t\tregistry.invalidSprites[uid] = [];\r\n\t\tregistry.invalidDatas[uid] = [];\r\n\t\tregistry.invalidPositions[uid] = [];\r\n\t\tregistry.invalidLayouts[uid] = [];\r\n\r\n\t\tcontainer.baseId = uid;\r\n\r\n\t\tsprite.isBaseSprite = true;\r\n\t\tsprite.focusFilter = new FocusFilter();\r\n\t\tregistry.baseSprites.push(sprite);\r\n\t\tregistry.baseSpritesByUid[uid] = sprite;\r\n\r\n\t\tsprite.maskRectangle = { x: 0, y: 0, width: Math.max(svgDiv.width || 0, 0), height: Math.max(svgDiv.height || 0, 0) };\r\n\r\n\t\t// this solves issues with display:none, as all children are measured as 0x0\r\n\t\tcontainer.events.on(\"maxsizechanged\", (event) => {\r\n\t\t\tif (event.previousWidth == 0 || event.previousHeight == 0) {\r\n\t\t\t\tcontainer.deepInvalidate();\r\n\t\t\t}\r\n\t\t\tif (sprite.maskRectangle) {\r\n\t\t\t\tsprite.maskRectangle = { x: 0, y: 0, width: Math.max(svgDiv.width || 0, 0), height: Math.max(svgDiv.height || 0, 0) };\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet loopTimer: number | null = null;\r\n\r\n\t\t// Checks to see whether the chart was properly disposed or not\r\n\t\tconst loop = () => {\r\n\t\t\tif (!sprite.isDisposed()) {\r\n\t\t\t\tif ($dom.getRoot(sprite.dom) == null) {\r\n\t\t\t\t\tif (options.autoDispose) {\r\n\t\t\t\t\t\tcontainer.htmlContainer = undefined;\r\n\t\t\t\t\t\tsvgDiv.htmlElement = undefined;\r\n\t\t\t\t\t\tsprite.dispose();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$log.warn(\"Chart was not disposed\", sprite.uid);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tloopTimer = null;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tloopTimer = window.setTimeout(loop, 1000);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tloopTimer = null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tloop();\r\n\r\n\t\tsprite.addDisposer(new Disposer(() => {\r\n\t\t\tif (loopTimer !== null) {\r\n\t\t\t\tclearTimeout(loopTimer);\r\n\t\t\t}\r\n\t\t\t$array.remove(registry.baseSprites, sprite);\r\n\t\t\tregistry.baseSpritesByUid[sprite.uid] = undefined;\r\n\t\t}));\r\n\r\n\t\t// TODO figure out a better way of doing this\r\n\t\tsprite.addDisposer(container);\r\n\r\n\t\t// tooltip container\r\n\t\tlet tooltipContainer: Container = container.createChild(Container);\r\n\t\ttooltipContainer.topParent = container;\r\n\t\ttooltipContainer.width = percent(100);\r\n\t\ttooltipContainer.height = percent(100);\r\n\t\ttooltipContainer.isMeasured = false;\r\n\t\tcontainer.tooltipContainer = tooltipContainer;\r\n\r\n\t\tsprite.tooltip = new Tooltip();\r\n\t\tsprite.tooltip.hide(0);\r\n\t\tsprite.tooltip.setBounds({ x: 0, y: 0, width: tooltipContainer.maxWidth, height: tooltipContainer.maxHeight });\r\n\r\n\t\ttooltipContainer.events.on(\"maxsizechanged\", () => {\r\n\t\t\t$type.getValue(sprite.tooltip).setBounds({ x: 0, y: 0, width: tooltipContainer.maxWidth, height: tooltipContainer.maxHeight });\r\n\t\t}, undefined, false)\r\n\r\n\t\t//@todo: maybe we don't need to create one by default but only on request?\r\n\r\n\t\tlet preloader = new Preloader();\r\n\t\tpreloader.events.on(\"inited\", () => {\r\n\t\t\tpreloader.__disabled = true;\r\n\t\t}, undefined, false);\r\n\t\tcontainer.preloader = preloader;\r\n\r\n\t\t//if (!options.commercialLicense) {\r\n\t\tif (sprite instanceof Container && !sprite.hasLicense()) {\r\n\t\t\tlet logo = tooltipContainer.createChild(AmChartsLogo);\r\n\t\t\ttooltipContainer.events.on(\"maxsizechanged\", (ev) => {\r\n\t\t\t\tif ((tooltipContainer.maxWidth <= 100) || (tooltipContainer.maxHeight <= 50)) {\r\n\t\t\t\t\tlogo.hide();\r\n\t\t\t\t}\r\n\t\t\t\telse if (logo.isHidden || logo.isHiding) {\r\n\t\t\t\t\tlogo.show();\r\n\t\t\t\t}\r\n\t\t\t}, undefined, false);\r\n\t\t\tsprite.logo = logo;\r\n\t\t\tlogo.align = \"left\";\r\n\t\t\tlogo.valign = \"bottom\";\r\n\t\t}\r\n\r\n\t\t$utils.used(sprite.numberFormatter); // need to create one.\r\n\r\n\t\t// Set this as an autonomouse instance\r\n\t\t// Controls like Preloader, Export will use this.\r\n\t\tcontainer.isStandaloneInstance = true;\r\n\r\n\t\tif (options.onlyShowOnViewport) {\r\n\t\t\tif (!$dom.isElementInViewport(htmlContainer, options.viewportTarget)) {\r\n\t\t\t\tsprite.__disabled = true;\r\n\t\t\t\tsprite.tooltipContainer.__disabled = true;\r\n\r\n\t\t\t\tlet disposers = [\r\n\t\t\t\t\t$dom.addEventListener(window, \"DOMContentLoaded\", function() { viewPortHandler(sprite); }),\r\n\t\t\t\t\t$dom.addEventListener(window, \"load\", function() { viewPortHandler(sprite); }),\r\n\t\t\t\t\t$dom.addEventListener(window, \"resize\", function() { viewPortHandler(sprite); }),\r\n\t\t\t\t\t$dom.addEventListener(window, \"scroll\", function() { viewPortHandler(sprite); })\r\n\t\t\t\t];\r\n\r\n\t\t\t\tif (options.viewportTarget) {\r\n\t\t\t\t\tconst targets = $type.isArray(options.viewportTarget) ? options.viewportTarget : options.viewportTarget ? [options.viewportTarget] : [];\r\n\t\t\t\t\tfor (let i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\tconst target = targets[i];\r\n\t\t\t\t\t\tdisposers.push($dom.addEventListener(target, \"resize\", function() { viewPortHandler(sprite); }));\r\n\t\t\t\t\t\tdisposers.push($dom.addEventListener(target, \"scroll\", function() { viewPortHandler(sprite); }));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet disposer = new MultiDisposer(disposers);\r\n\r\n\t\t\t\tsprite.addDisposer(disposer);\r\n\t\t\t\tsprite.vpDisposer = disposer;\r\n\t\t\t}\r\n\t\t\telse if (options.queue) {\r\n\t\t\t\taddToQueue(sprite);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (options.queue) {\r\n\t\t\taddToQueue(sprite);\r\n\t\t}\r\n\r\n\t\treturn sprite;\r\n\t}\r\n\telse {\r\n\t\tsystem.log(\"html container not found\");\r\n\t\tthrow new Error(\"html container not found\");\r\n\t}\r\n}\r\n\r\n/**\r\n * Disposes all of the currently active charts.\r\n */\r\nexport function disposeAllCharts(): void {\r\n\twhile (registry.baseSprites.length !== 0) {\r\n\t\tregistry.baseSprites.pop().dispose();\r\n\t}\r\n}\r\n\r\nexport function addToQueue(sprite: Sprite) {\r\n\tif (registry.queue.indexOf(sprite) == -1) {\r\n\t\tsprite.__disabled = true;\r\n\t\tsprite.tooltipContainer.__disabled = true;\r\n\t\tsprite.events.disableType(\"appeared\");\r\n\r\n\t\tif (registry.queue.length == 0) {\r\n\t\t\tregistry.events.once(\"exitframe\", () => {\r\n\t\t\t\tqueueHandler(sprite);\r\n\t\t\t})\r\n\t\t\tsystem.requestFrame();\r\n\t\t}\r\n\r\n\t\tsprite.addDisposer(new Disposer(() => {\r\n\t\t\tremoveFromQueue(sprite);\r\n\t\t}))\r\n\r\n\t\tregistry.queue.push(sprite);\r\n\t}\r\n}\r\n\r\nexport function removeFromQueue(sprite: Sprite) {\r\n\tlet index = registry.queue.indexOf(sprite);\r\n\tif (index >= 0) {\r\n\t\tregistry.queue.splice(registry.queue.indexOf(sprite), 1);\r\n\t\tlet nextSprite = registry.queue[index];\r\n\t\tif (nextSprite) {\r\n\t\t\tqueueHandler(nextSprite);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function viewPortHandler(sprite: Sprite) {\r\n\tif (sprite.__disabled && $dom.isElementInViewport(sprite.htmlContainer, options.viewportTarget)) {\r\n\r\n\t\tif (sprite.vpDisposer) {\r\n\t\t\tsprite.vpDisposer.dispose();\r\n\t\t}\r\n\r\n\t\taddToQueue(sprite);\r\n\t}\r\n}\r\n\r\nexport function queueHandler(sprite: Sprite) {\r\n\tsprite.__disabled = false;\r\n\tsprite.tooltipContainer.__disabled = false;\r\n\tsprite.events.enableType(\"appeared\");\r\n\tsprite.dispatch(\"removedfromqueue\");\r\n\r\n\tif (sprite.showOnInit) {\r\n\t\tsprite.events.on(\"appeared\", () => {\r\n\t\t\tremoveFromQueue(sprite);\r\n\t\t})\r\n\t}\r\n\r\n\tif (sprite.vpDisposer) {\r\n\t\tsprite.vpDisposer.dispose();\r\n\t}\r\n\tif (sprite instanceof Container) {\r\n\t\tsprite.invalidateLabels();\r\n\t}\r\n\r\n\tif (sprite.tooltipContainer) {\r\n\t\tsprite.tooltipContainer.invalidateLayout();\r\n\t}\r\n\tif (sprite instanceof Component) {\r\n\t\tsprite.invalidateData();\r\n\t\tsprite.reinit();\r\n\r\n\t\tsprite.events.once(\"datavalidated\", () => {\r\n\t\t\tif (sprite.showOnInit) {\r\n\t\t\t\tsprite.appear();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tremoveFromQueue(sprite);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\telse {\r\n\t\tsprite.reinit();\r\n\t\tsprite.events.once(\"inited\", () => {\r\n\t\t\tremoveFromQueue(sprite);\r\n\t\t})\r\n\t\tif (sprite.showOnInit) {\r\n\t\t\tsprite.appear();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * A shortcut to creating a chart instance.\r\n *\r\n * The first argument is either a reference to or an id of a DOM element to be\r\n * used as a container for the chart.\r\n *\r\n * The second argument is the type reference of the chart type. (for plain\r\n * JavaScript users this can also be a string indicating chart type)\r\n *\r\n * ```TypeScript\r\n * let chart = am4core.create(\"chartdiv\", am4charts.PieChart);\r\n * ```\r\n * ```JavaScript\r\n * // Can pass in chart type reference like this:\r\n * var chart = am4core.create(\"chartdiv\", am4charts.PieChart);\r\n *\r\n * // ... or chart class type as a string:\r\n * var chart = am4core.create(\"chartdiv\", \"PieChart\");\r\n * ```\r\n *\r\n * @param htmlElement  Reference or id of the target container element\r\n * @param classType    Class type of the target chart type\r\n * @return Chart instance\r\n */\r\nexport function create<T extends Sprite>(htmlElement: $type.Optional<HTMLElement | string>, classType: { new(): T; }): T {\r\n\r\n\t// This is a nasty hack for the benefit of vanilla JS users, who do not\r\n\t// enjoy benefits of type-check anyway.\r\n\t// We're allowing passing in a name of the class rather than type reference\r\n\t// itself.\r\n\tlet classError: $type.Optional<Error>;\r\n\tif ($type.isString(classType)) {\r\n\t\tif ($type.hasValue(registry.registeredClasses[classType])) {\r\n\t\t\tclassType = registry.registeredClasses[classType];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tclassType = registry.registeredClasses[\"Container\"];\r\n\t\t\tclassError = new Error(\"Class [\" + classType + \"] is not loaded.\");\r\n\t\t}\r\n\t}\r\n\r\n\t// Create the chart\r\n\tlet chart = createChild(htmlElement, classType);\r\n\r\n\t// Error?\r\n\tif (classError) {\r\n\t\tchart.raiseCriticalError(classError);\r\n\t}\r\n\r\n\treturn chart;\r\n\r\n}\r\n\r\n/**\r\n * A shortcut to creating a chart from a config object.\r\n *\r\n * Example:\r\n *\r\n * ```TypeScript\r\n * let chart am4core.createFromConfig({ ... }, \"chartdiv\", am4charts.XYChart );\r\n * ```\r\n * ```JavaScript\r\n * var chart am4core.createFromConfig({ ... }, \"chartdiv\", \"XYChart\" );\r\n * ```\r\n *\r\n * If `chartType` parameter is not supplied it must be set in a config object,\r\n * via reference to chart type, e.g.:\r\n *\r\n * ```TypeScript\r\n * {\r\n *   \"type\": am4charts.XYChart,\r\n *   // ...\r\n * }\r\n * ```\r\n * ```JavaScript\r\n * {\r\n *   \"type\": am4charts.XYChart,\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * Or via string: (if you are using JavaScript)\r\n *\r\n * ```TypeScript\r\n * {\r\n *   \"type\": \"XYChart\",\r\n *   // ...\r\n * }\r\n * ```\r\n * ```JavaScript\r\n * {\r\n *   \"type\": \"XYChart\",\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * A `container` can either be a reference to an HTML container to put chart\r\n * in, or it's unique id.\r\n *\r\n * If `container` is not specified, it must be included in the config object:\r\n *\r\n * ```TypeScript\r\n * {\r\n *   \"type\": \"XYChart\",\r\n *   \"container\": \"chartdiv\",\r\n *   // ...\r\n * }\r\n * ```\r\n * ```JavaScript\r\n * {\r\n *   \"type\": \"XYChart\",\r\n *   \"container\": \"chartdiv\",\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * @param config       Config object in property/value pairs\r\n * @param htmlElement  Container reference or ID\r\n * @param objectType   Chart type\r\n * @return A newly created chart instance\r\n * @todo Throw exception if type is not correct\r\n */\r\nexport function createFromConfig(config: { [index: string]: any }, htmlElement?: string | HTMLElement, classType?: { new(): Sprite; } | string): Sprite {\r\n\r\n\t// Extract chart type from config if necessary\r\n\tif (!$type.hasValue(classType)) {\r\n\t\tclassType = config.type;\r\n\t\tdelete config.type;\r\n\t}\r\n\r\n\t// Extract element from config if necessary\r\n\tif (!$type.hasValue(htmlElement)) {\r\n\t\thtmlElement = config.container;\r\n\t\tdelete config.container;\r\n\t}\r\n\r\n\t// Check if we need to extract actual type reference\r\n\tlet finalType;\r\n\tlet classError: $type.Optional<Error>;\r\n\tif ($type.isString(classType) && $type.hasValue(registry.registeredClasses[classType])) {\r\n\t\tfinalType = registry.registeredClasses[classType];\r\n\t}\r\n\telse if (typeof classType !== \"function\") {\r\n\t\tfinalType = Container;\r\n\t\tclassError = new Error(\"Class [\" + classType + \"] is not loaded.\");\r\n\t}\r\n\telse {\r\n\t\tfinalType = classType;\r\n\t}\r\n\r\n\t// Create the chart\r\n\tlet chart = createChild(htmlElement, finalType);\r\n\r\n\t// Set config\r\n\tif (classError) {\r\n\t\tchart.raiseCriticalError(classError);\r\n\t}\r\n\telse {\r\n\t\tchart.config = config;\r\n\t}\r\n\r\n\treturn chart;\r\n\r\n}\r\n\r\n/**\r\n * Applies a theme to System, and subsequently all chart instances created\r\n * from that point forward.\r\n *\r\n * amCharts supports multiple themes. Calling `useTheme` multiple times will\r\n * make the System apply multiple themes, rather than overwrite previously\r\n * set one.\r\n *\r\n * This enables combining features from multiple themes on the same chart.\r\n * E.g.:\r\n *\r\n * ```TypeScript\r\n * am4core.useTheme(am4themes.material);\r\n * am4core.useTheme(am4themes.animated);\r\n * ```\r\n * ```JavaScript\r\n * am4core.useTheme(am4themes.material);\r\n * am4core.useTheme(am4themes.animated);\r\n * ```\r\n *\r\n * The above will apply both the Material color and animation options to all\r\n * charts created.\r\n *\r\n * @param value  A reference to a theme\r\n */\r\nexport function useTheme(value: ITheme): void {\r\n\tif (registry.themes.indexOf(value) === -1) {\r\n\t\tregistry.themes.push(value);\r\n\t}\r\n}\r\n\r\n/**\r\n * Removes a theme from \"active themes\" list, so it won't get applied to any\r\n * charts created subsequently.\r\n *\r\n * @param value  A reference to a theme\r\n */\r\nexport function unuseTheme(value: ITheme): void {\r\n\t$array.remove(registry.themes, value);\r\n}\r\n\r\n/**\r\n * Removes all \"active\" themes. Any charts created subsequently will not have\r\n * any theme applied to them.\r\n */\r\nexport function unuseAllThemes(): void {\r\n\tregistry.themes = [];\r\n}\r\n\r\n/**\r\n * Adds a license, e.g.:\r\n *\r\n * ```TypeScript\r\n * am4core.addLicense(\"xxxxxxxx\");\r\n * ```\r\n * ```JavaScript\r\n * am4core.addLicense(\"xxxxxxxx\");\r\n * ```\r\n *\r\n * Multiple licenses can be added to cover for multiple products.\r\n *\r\n * @since 4.5.16\r\n * @param  license  License key\r\n */\r\nexport function addLicense(license: string): void {\r\n\toptions.licenses.push(license);\r\n}\r\n"]}