{"version":3,"file":"DateAxisRangeSelector.js","sourceRoot":"","sources":["../../../../../src/.internal/plugins/rangeSelector/DateAxisRangeSelector.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * Range selector for [[DateAxis]].\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { RangeSelector } from \"./RangeSelector\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { DateAxis } from \"../../charts/axes/DateAxis\";\r\nimport { AxisRenderer } from \"../../charts/axes/AxisRenderer\";\r\nimport { ITimeInterval } from \"../../core/defs/ITimeInterval\";\r\nimport { DateFormatter } from \"../../core/formatters/DateFormatter\";\r\nimport * as $time from \"../../core/utils/Time\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $array from \"../../core/utils/Array\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\nexport interface IDateAxisRangeSelectorPeriod {\r\n\tname: string;\r\n\tinterval: ITimeInterval | \"ytd\" | \"max\";\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a control used to select date range and preset periods for\r\n * a [[DateAxis]].\r\n *\r\n * ```TypeScript\r\n * let selector = new am4plugins_rangeSelector.DateAxisRangeSelector()\r\n * selector.container = document.getElementById(\"selectordiv\");\r\n * selector.axis = chart.xAxes.getIndex(0);\r\n * ```\r\n * ```JavaScript\r\n * var selector = new am4plugins_rangeSelector.DateAxisRangeSelector()\r\n * selector.container = document.getElementById(\"selectordiv\");\r\n * selector.axis = chart.xAxes.getIndex(0);\r\n * ```\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/tutorials/plugin-range-selector/} for more information on how to use this plugin\r\n * @important\r\n * @todo JSON example\r\n */\r\nexport class DateAxisRangeSelector extends RangeSelector {\r\n\r\n\t/**\r\n\t * Reference to target axis.\r\n\t *\r\n\t * @ignore\r\n\t */\r\n\tpublic _axis: DateAxis<AxisRenderer>;\r\n\r\n\t/**\r\n\t * Holds references to various HTML elements control consists of.\r\n\t */\r\n\tprotected _elements: {\r\n\t\twrapper?: HTMLElement;\r\n\t\trangeWrapper?: HTMLElement;\r\n\t\tfromTitle?: HTMLElement;\r\n\t\tfromInput?: HTMLInputElement;\r\n\t\ttoTitle?: HTMLElement;\r\n\t\ttoInput?: HTMLInputElement;\r\n\t\tperiodWrapper?: HTMLElement;\r\n\t\tperiodTitle?: HTMLElement;\r\n\t\tperiodButtons?: HTMLElement[];\r\n\t} = {\r\n\t\t\tperiodButtons: []\r\n\t\t};\r\n\r\n\t/**\r\n\t * List of pre-defined period buttons.\r\n\t */\r\n\tprotected _periods: IDateAxisRangeSelectorPeriod[] = [\r\n\t\t{ name: this.language.translateAny(\"%1M\", undefined, \"1\"), interval: { timeUnit: \"month\", count: 1 } },\r\n\t\t{ name: this.language.translateAny(\"%1M\", undefined, \"3\"), interval: { timeUnit: \"month\", count: 3 } },\r\n\t\t{ name: this.language.translateAny(\"%1M\", undefined, \"6\"), interval: { timeUnit: \"month\", count: 6 } },\r\n\t\t{ name: this.language.translateAny(\"%1Y\", undefined, \"1\"), interval: { timeUnit: \"year\", count: 1 } },\r\n\t\t{ name: this.language.translateAny(\"YTD\"), interval: \"ytd\" },\r\n\t\t{ name: this.language.translateAny(\"MAX\"), interval: \"max\" },\r\n\t];\r\n\r\n\t/**\r\n\t * Date format to use for input fields.\r\n\t */\r\n\tprotected _inputDateFormat = \"yyyy-MM-dd\";\r\n\r\n\t/**\r\n\t * Date formatter.\r\n\t */\r\n\tprotected _dateFormatter: DateFormatter;\r\n\r\n\t/**\r\n\t * Timeout to use to delay zooming of axis (so it does not happen on\r\n\t * every keystroke in input fields).\r\n\t */\r\n\tprivate _zoomTimeout: any;\r\n\r\n\t/**\r\n\t * Number of milliseconds to wait after last keystroke in date input field\r\n\t * before zooming the axis.\r\n\t *\r\n\t * @default 500\r\n\t */\r\n\tpublic zoomDelay: number = 500;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"DateAxisRangeSelector\";\r\n\t\tthis._disposers.push(this._language);\r\n\t\tthis.invalidate();\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)draws the control.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tthis.draw();\r\n\t\tsuper.validate();\r\n\t}\r\n\r\n\t/**\r\n\t * Adds events to the axis.\r\n\t */\r\n\tprotected prepAxis(): void {\r\n\t\tthis._disposers.push(this.axis.events.on(\"selectionextremeschanged\", (ev) => {\r\n\t\t\tthis.updateRangeInputs();\r\n\t\t}));\r\n\t\tthis._disposers.push(this.axis.events.on(\"extremeschanged\", (ev) => {\r\n\t\t\tthis.updateRangeInputs();\r\n\t\t}));\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the control.\r\n\t *\r\n\t * @ignore\r\n\t */\r\n\tpublic draw(): void {\r\n\r\n\t\tsuper.draw();\r\n\r\n\t\tconst tabindex = this.tabindex;\r\n\r\n\t\t// Range wrapper\r\n\t\tif (!this._elements.rangeWrapper) {\r\n\t\t\tthis._elements.rangeWrapper = document.createElement(\"div\");\r\n\t\t\tthis._elements.rangeWrapper.className = this.classPrefix + \"-range-wrapper\";\r\n\t\t\tthis._elements.wrapper.appendChild(this._elements.rangeWrapper);\r\n\t\t}\r\n\r\n\t\t// From title\r\n\t\tif (!this._elements.fromTitle) {\r\n\t\t\tthis._elements.fromTitle = document.createElement(\"span\");\r\n\t\t\tthis._elements.fromTitle.className = this.classPrefix + \"-title \" + this.classPrefix + \"-from-title\";\r\n\t\t\tthis._elements.fromTitle.innerHTML = this.language.translateAny(\"From %1\", undefined, \"\");\r\n\t\t\tthis._elements.rangeWrapper.appendChild(this._elements.fromTitle);\r\n\t\t}\r\n\r\n\t\t// From input\r\n\t\tif (!this._elements.fromInput) {\r\n\t\t\tthis._elements.fromInput = <HTMLInputElement>document.createElement(\"input\");\r\n\t\t\tthis._elements.fromInput.type = \"text\";\r\n\t\t\tthis._elements.fromInput.className = this.classPrefix + \"-from-input\";\r\n\r\n\t\t\tif (tabindex) {\r\n\t\t\t\tthis._elements.fromInput.setAttribute(\"tabindex\", tabindex.toString());\r\n\t\t\t}\r\n\r\n\t\t\tthis._elements.rangeWrapper.appendChild(this._elements.fromInput);\r\n\r\n\t\t\tthis._elements.fromInput.addEventListener(\"keyup\", () => {\r\n\t\t\t\tthis.updateZoom()\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// To title\r\n\t\tif (!this._elements.toTitle) {\r\n\t\t\tthis._elements.toTitle = document.createElement(\"span\");\r\n\t\t\tthis._elements.toTitle.className = this.classPrefix + \"-title \" + this.classPrefix + \"-to-title\";\r\n\t\t\tthis._elements.toTitle.innerHTML = this.language.translateAny(\"To %1\", undefined, \"\");\r\n\t\t\tthis._elements.rangeWrapper.appendChild(this._elements.toTitle);\r\n\t\t}\r\n\r\n\t\t// To input\r\n\t\tif (!this._elements.toInput) {\r\n\t\t\tthis._elements.toInput = <HTMLInputElement>document.createElement(\"input\");\r\n\t\t\tthis._elements.toInput.type = \"text\";\r\n\t\t\tthis._elements.toInput.className = this.classPrefix + \"-to-input\";\r\n\t\t\tif (tabindex) {\r\n\t\t\t\tthis._elements.toInput.setAttribute(\"tabindex\", tabindex.toString());\r\n\t\t\t}\r\n\t\t\tthis._elements.rangeWrapper.appendChild(this._elements.toInput);\r\n\r\n\t\t\tthis._elements.toInput.addEventListener(\"keyup\", () => {\r\n\t\t\t\tthis.updateZoom()\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Period buttons\r\n\t\tif (this.periods.length) {\r\n\r\n\t\t\t// period wrapper\r\n\t\t\tif (!this._elements.periodWrapper) {\r\n\t\t\t\tthis._elements.periodWrapper = document.createElement(\"div\");\r\n\t\t\t\tthis._elements.periodWrapper.className = this.classPrefix + \"-period-wrapper\";\r\n\t\t\t\tthis._elements.wrapper.appendChild(this._elements.periodWrapper);\r\n\r\n\r\n\t\t\t\t// Period title\r\n\t\t\t\tif (!this._elements.periodTitle) {\r\n\t\t\t\t\tthis._elements.periodTitle = document.createElement(\"span\");\r\n\t\t\t\t\tthis._elements.periodTitle.className = this.classPrefix + \"-title \" + this.classPrefix + \"-period-title\";\r\n\t\t\t\t\tthis._elements.periodTitle.innerHTML = this.language.translateAny(\"Zoom\");\r\n\t\t\t\t\tthis._elements.periodWrapper.appendChild(this._elements.periodTitle);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Period buttons\r\n\t\t\t\t$array.each(this.periods, (period) => {\r\n\t\t\t\t\tconst button = document.createElement(\"button\");\r\n\t\t\t\t\tbutton.className = this.classPrefix + \"-period-button\";\r\n\t\t\t\t\tbutton.innerHTML = period.name;\r\n\t\t\t\t\tif (tabindex) {\r\n\t\t\t\t\t\tbutton.setAttribute(\"tabindex\", tabindex.toString());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._elements.periodButtons.push(button);\r\n\t\t\t\t\tthis._elements.periodWrapper.appendChild(button);\r\n\r\n\t\t\t\t\tbutton.addEventListener(\"click\", () => {\r\n\t\t\t\t\t\tthis.setPeriodInterval(period.interval);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.dispatchImmediately(\"drawn\", {\r\n\t\t\ttype: \"drawn\"\r\n\t\t});\r\n\r\n\r\n\t\tthis.updateRangeInputs();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates input values based on the current zoom selection of the axis.\r\n\t *\r\n\t * @ignore\r\n\t */\r\n\tpublic updateRangeInputs(): void {\r\n\t\tif (this._elements.fromInput && this._elements.toInput && this.axis) {\r\n\t\t\tconst axis = this.axis;\r\n\t\t\tconst formatter = this.dateFormatter;\r\n\t\t\tconst minZoomed = axis.minZoomed + $time.getDuration(axis.mainBaseInterval.timeUnit, axis.mainBaseInterval.count) * 0.5;\r\n\t\t\tthis._elements.fromInput.value = formatter.format(minZoomed, this.inputDateFormat);\r\n\t\t\tthis._elements.toInput.value = formatter.format(new Date(axis.maxZoomed), this.inputDateFormat);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Zooms axis according to input fields.\r\n\t *\r\n\t * @ignore\r\n\t */\r\n\tpublic updateZoom(): void {\r\n\t\tif (this._zoomTimeout) {\r\n\t\t\tclearTimeout(this._zoomTimeout);\r\n\t\t}\r\n\t\tthis._zoomTimeout = setTimeout(() => {\r\n\t\t\tlet start = this._elements.fromInput.value;\r\n\t\t\tlet end = this._elements.toInput.value;\r\n\t\t\tif ((start.length < this.inputDateFormat.length) || (end.length < this.inputDateFormat.length)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet startDate = this.dateFormatter.parse(start, this.inputDateFormat);\r\n\t\t\tlet endDate = this.dateFormatter.parse(end, this.inputDateFormat);\r\n\r\n\t\t\tif (startDate && endDate) {\r\n\t\t\t\tthis.axis.zoomToDates(startDate, endDate);\r\n\t\t\t}\r\n\t\t}, this.zoomDelay);\r\n\t}\r\n\r\n\t/**\r\n\t * Zooms the axis to a preset time interal or `\"ytd\"` or `\"max\"`.\r\n\t * \r\n\t * @param  interval  Interval\r\n\t */\r\n\tpublic setPeriodInterval(interval: ITimeInterval | \"ytd\" | \"max\"): void {\r\n\t\tlet date;\r\n\t\tconst group = this.getGroupInterval(this.axis.baseInterval);\r\n\t\tif (interval == \"max\") {\r\n\t\t\tdate = new Date(this.axis.groupMin[group] || this.axis.min);\r\n\t\t}\r\n\t\telse if (interval == \"ytd\") {\r\n\t\t\tdate = new Date(this.axis.groupMin[group] || this.axis.min);\r\n\t\t\tdate = new Date(this.axis.groupMax[group] || this.axis.max);\r\n\t\t\t$time.round(date, \"year\", 1);\r\n\t\t}\r\n\t\telse if ($type.isObject(interval)) {\r\n\t\t\tdate = new Date(this.axis.groupMax[group] || this.axis.max);\r\n\t\t\t$time.add(date, interval.timeUnit, -1 * interval.count);\r\n\t\t}\r\n\r\n\t\tif (date) {\r\n\t\t\tthis.zoomToDates(date);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getGroupInterval(interval: ITimeInterval): string {\r\n\t\treturn interval.timeUnit + interval.count;\r\n\t}\r\n\r\n\t/**\r\n\t * Zooms the axis using start date.\r\n\t * \r\n\t * @param  date  Start date\r\n\t */\r\n\tpublic zoomToDates(date: Date): void {\r\n\t\tconst axis = this.axis;\r\n\t\tconst group = this.getGroupInterval(axis.baseInterval);\r\n\t\tconst min = axis.groupMin[group] || axis.min;\r\n\t\tconst max = axis.groupMax[group] || axis.max;\r\n\t\taxis.keepSelection = true;\r\n\t\taxis.zoom({ start: (date.getTime() - min) / (max - min), end: 1 });\r\n\t}\r\n\r\n\t/**\r\n\t * Getters and setters\r\n\t */\r\n\r\n\t/**\r\n\t * A list of pre-defined periods to show buttons for.\r\n\t * \r\n\t * @param  value  Periods\r\n\t */\r\n\tpublic set periods(value: IDateAxisRangeSelectorPeriod[]) {\r\n\t\tthis._periods = value;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return Periods\r\n\t */\r\n\tpublic get periods(): IDateAxisRangeSelectorPeriod[] {\r\n\t\treturn this._periods;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[DateFormatter]] instance to use.\r\n\t *\r\n\t * If not set, control will inherit one from the target axis.\r\n\t *\r\n\t * @param  value  Formatter\r\n\t */\r\n\tpublic set dateFormatter(value: DateFormatter) {\r\n\t\tthis._dateFormatter = value;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return Formatter\r\n\t */\r\n\tpublic get dateFormatter(): DateFormatter {\r\n\t\tif (!this._dateFormatter) {\r\n\r\n\t\t\t// Maybe use one from axis?\r\n\t\t\tif (this._axis) {\r\n\t\t\t\tthis._dateFormatter = this._axis.dateFormatter;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._dateFormatter = new DateFormatter();\r\n\t\t\t\tthis._disposers.push(this._dateFormatter);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this._dateFormatter;\r\n\t}\r\n\r\n\t/**\r\n\t * An format to use for the date input fields.\r\n\t *\r\n\t * If not set, it will use `dateFormat` from the [[DateFormatter]] object.\r\n\t *\r\n\t * @default \"yyyy-MM-dd\"\r\n\t * @param  value  Date format\r\n\t */\r\n\tpublic set inputDateFormat(value: string) {\r\n\t\tif (this._inputDateFormat != value) {\r\n\t\t\tthis._inputDateFormat = value;\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return Date format\r\n\t */\r\n\tpublic get inputDateFormat(): string {\r\n\t\tif (this._inputDateFormat) {\r\n\t\t\treturn this._inputDateFormat;\r\n\t\t}\r\n\t\telse if (this.dateFormatter && $type.isString(this.dateFormatter.dateFormat)) {\r\n\t\t\treturn this.dateFormatter.dateFormat;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn \"yyyy-MM-dd\";\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"DateAxisRangeSelector\"] = DateAxisRangeSelector;"]}