{"ast":null,"code":"var _jsxFileName = \"/Users/leehochan/Desktop/WORI42/react/src/Component/Example/Compose/Compose.js\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport MapGL, { FlyToInterpolator } from \"react-map-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport request from \"../Axios/request\";\nimport InputBox from \"./InputBoxGrid\";\nimport Marker from \"./Marker/Marker\";\nimport Sliderbar from \"./Slidebar/Sliderbar\";\nimport Footer from \"./Footer/Footer\";\nimport \"./compose.scss\"; // import Chart from \"../Chart/chart\"\n\nimport dotenv from \"dotenv\";\ndotenv.config();\n\nfunction Compose() {\n  const [info, setInfo] = useState({\n    longitude: 127.024612,\n    latitude: 37.5326,\n    zoom: 5.5,\n    pitch: 0,\n    bearing: 0,\n    transitionInterpolator: new FlyToInterpolator({\n      speed: 1.2\n    }),\n    transitionDuration: 1000,\n    searchInfo: \"\",\n    isMain: true\n  });\n  const [userData, setUserData] = useState([]);\n  const mainSearchInput = useCallback(vp => {\n    setInfo({ ...info,\n      searchInfo: vp.target.value\n    });\n  }, [info]);\n  const goToViewPort = useCallback(() => {\n    request(\"get\", `https://maps.googleapis.com/maps/api/geocode/json`, {\n      address: info.searchInfo,\n      key: process.env.REACT_APP_Google_Token\n    }).then(res => {\n      setInfo({ ...info,\n        isMain: false,\n        latitude: res.data.results[0].geometry.location.lat,\n        longitude: res.data.results[0].geometry.location.lng,\n        zoom: 14,\n        transitionInterpolator: new FlyToInterpolator(),\n        transitionDuration: 1000\n      });\n    }).catch(res => {\n      console.log(res);\n    });\n  }, [info]);\n  useEffect(() => {\n    if (info.isMain && info.longitude <= 128) {\n      const interval = setInterval(() => {\n        setInfo({ ...info,\n          latitude: info.latitude + 0.005,\n          longitude: info.longitude + 0.005\n        });\n      }, 50);\n      return () => clearInterval(interval);\n    }\n\n    return;\n  }, [info]);\n  useEffect(() => {\n    request(\"post\", `http://localhost:3013/covid19/data/user`, {\n      user_data: [{\n        province: \"Seoul\",\n        city: \"Yongsan-gu\",\n        group: \"TRUE\",\n        infection_case: \"Itaewon Clubs\",\n        confirmed: 139,\n        latitude: 37.538621,\n        longitude: 126.992652,\n        time: \"UTF로 해주세요\",\n        name: \"hochan\"\n      }, {\n        province: \"Seoul\",\n        city: \"Gwanak-gu\",\n        group: \"TRUE\",\n        infection_case: \"Richway\",\n        confirmed: 119,\n        latitude: 37.48208,\n        longitude: 126.901384,\n        time: \"UTF로 해주세요\",\n        name: \"Jamin\"\n      }]\n    }).then(res => {\n      setUserData(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(MapGL, Object.assign({}, info, {\n    width: \"100vw\",\n    height: \"100vh\" // mapStyle=\"mapbox://styles/holee/ckcmzzc5y24hb1ip8lnkdt8sq\"\n    // mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_THEME}\n    ,\n    onViewportChange: info.isMain ? () => {\n      \"\";\n    } : nextViewport => setInfo({ ...info,\n      ...nextViewport\n    }) // mapStyle=\"mapbox://styles/mapbox/streets-v11\"\n    ,\n    mapStyle: \"mapbox://styles/mapbox/dark-v9\",\n    mapboxApiAccessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Marker, {\n    userData: userData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(InputBox, {\n    info: info,\n    setInfo: setInfo,\n    mainSearchInput: mainSearchInput,\n    goToViewPort: goToViewPort,\n    isMain: info.isMain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  })), info.isMain ? () => {\n    \"\";\n  } : /*#__PURE__*/React.createElement(Sliderbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Chart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default Compose;","map":{"version":3,"sources":["/Users/leehochan/Desktop/WORI42/react/src/Component/Example/Compose/Compose.js"],"names":["React","useState","useCallback","useEffect","MapGL","FlyToInterpolator","request","InputBox","Marker","Sliderbar","Footer","dotenv","config","Compose","info","setInfo","longitude","latitude","zoom","pitch","bearing","transitionInterpolator","speed","transitionDuration","searchInfo","isMain","userData","setUserData","mainSearchInput","vp","target","value","goToViewPort","address","key","process","env","REACT_APP_Google_Token","then","res","data","results","geometry","location","lat","lng","catch","console","log","interval","setInterval","clearInterval","user_data","province","city","group","infection_case","confirmed","time","name","err","nextViewport","REACT_APP_MAPBOX_TOKEN"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,OAAOC,KAAP,IAAgBC,iBAAhB,QAAyC,cAAzC;AACA,OAAO,8BAAP;AAEA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAO,gBAAP,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACAA,MAAM,CAACC,MAAP;;AAEA,SAASC,OAAT,GAAmB;AACjB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBd,QAAQ,CAAC;AAC/Be,IAAAA,SAAS,EAAE,UADoB;AAE/BC,IAAAA,QAAQ,EAAE,OAFqB;AAG/BC,IAAAA,IAAI,EAAE,GAHyB;AAI/BC,IAAAA,KAAK,EAAE,CAJwB;AAK/BC,IAAAA,OAAO,EAAE,CALsB;AAM/BC,IAAAA,sBAAsB,EAAE,IAAIhB,iBAAJ,CAAsB;AAAEiB,MAAAA,KAAK,EAAE;AAAT,KAAtB,CANO;AAO/BC,IAAAA,kBAAkB,EAAE,IAPW;AAQ/BC,IAAAA,UAAU,EAAE,EARmB;AAS/BC,IAAAA,MAAM,EAAE;AATuB,GAAD,CAAhC;AAWA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0B1B,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAM2B,eAAe,GAAG1B,WAAW,CAChC2B,EAAD,IAAQ;AACNd,IAAAA,OAAO,CAAC,EACN,GAAGD,IADG;AAENU,MAAAA,UAAU,EAAEK,EAAE,CAACC,MAAH,CAAUC;AAFhB,KAAD,CAAP;AAID,GANgC,EAOjC,CAACjB,IAAD,CAPiC,CAAnC;AAUA,QAAMkB,YAAY,GAAG9B,WAAW,CAAC,MAAM;AACrCI,IAAAA,OAAO,CAAC,KAAD,EAAS,mDAAT,EAA6D;AAClE2B,MAAAA,OAAO,EAAEnB,IAAI,CAACU,UADoD;AAElEU,MAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAFiD,KAA7D,CAAP,CAIGC,IAJH,CAISC,GAAD,IAAS;AACbxB,MAAAA,OAAO,CAAC,EACN,GAAGD,IADG;AAENW,QAAAA,MAAM,EAAE,KAFF;AAGNR,QAAAA,QAAQ,EAAEsB,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,CAAjB,EAAoBC,QAApB,CAA6BC,QAA7B,CAAsCC,GAH1C;AAIN5B,QAAAA,SAAS,EAAEuB,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,CAAjB,EAAoBC,QAApB,CAA6BC,QAA7B,CAAsCE,GAJ3C;AAKN3B,QAAAA,IAAI,EAAE,EALA;AAMNG,QAAAA,sBAAsB,EAAE,IAAIhB,iBAAJ,EANlB;AAONkB,QAAAA,kBAAkB,EAAE;AAPd,OAAD,CAAP;AASD,KAdH,EAeGuB,KAfH,CAeUP,GAAD,IAAS;AACdQ,MAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACD,KAjBH;AAkBD,GAnB+B,EAmB7B,CAACzB,IAAD,CAnB6B,CAAhC;AAqBAX,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIW,IAAI,CAACW,MAAL,IAAeX,IAAI,CAACE,SAAL,IAAkB,GAArC,EAA0C;AACxC,YAAMiC,QAAQ,GAAGC,WAAW,CAAC,MAAM;AACjCnC,QAAAA,OAAO,CAAC,EACN,GAAGD,IADG;AAENG,UAAAA,QAAQ,EAAEH,IAAI,CAACG,QAAL,GAAgB,KAFpB;AAGND,UAAAA,SAAS,EAAEF,IAAI,CAACE,SAAL,GAAiB;AAHtB,SAAD,CAAP;AAKD,OAN2B,EAMzB,EANyB,CAA5B;AAOA,aAAO,MAAMmC,aAAa,CAACF,QAAD,CAA1B;AACD;;AACD;AACD,GAZQ,EAYN,CAACnC,IAAD,CAZM,CAAT;AAcAX,EAAAA,SAAS,CAAC,MAAM;AACdG,IAAAA,OAAO,CAAC,MAAD,EAAU,yCAAV,EAAoD;AACzD8C,MAAAA,SAAS,EAAE,CAAC;AACVC,QAAAA,QAAQ,EAAE,OADA;AAEVC,QAAAA,IAAI,EAAE,YAFI;AAGVC,QAAAA,KAAK,EAAE,MAHG;AAIVC,QAAAA,cAAc,EAAE,eAJN;AAKVC,QAAAA,SAAS,EAAE,GALD;AAMVxC,QAAAA,QAAQ,EAAE,SANA;AAOVD,QAAAA,SAAS,EAAE,UAPD;AAQV0C,QAAAA,IAAI,EAAE,WARI;AASVC,QAAAA,IAAI,EAAE;AATI,OAAD,EAUT;AACAN,QAAAA,QAAQ,EAAE,OADV;AAEAC,QAAAA,IAAI,EAAE,WAFN;AAGAC,QAAAA,KAAK,EAAE,MAHP;AAIAC,QAAAA,cAAc,EAAE,SAJhB;AAKAC,QAAAA,SAAS,EAAE,GALX;AAMAxC,QAAAA,QAAQ,EAAE,QANV;AAOAD,QAAAA,SAAS,EAAE,UAPX;AAQA0C,QAAAA,IAAI,EAAE,WARN;AASAC,QAAAA,IAAI,EAAE;AATN,OAVS;AAD8C,KAApD,CAAP,CAuBGrB,IAvBH,CAuBSC,GAAD,IAAS;AACbZ,MAAAA,WAAW,CAACY,GAAG,CAACC,IAAL,CAAX;AACD,KAzBH,EA0BGM,KA1BH,CA0BUc,GAAD,IAAS;AACdb,MAAAA,OAAO,CAACC,GAAR,CAAYY,GAAZ;AACD,KA5BH;AA6BD,GA9BQ,EA8BP,EA9BO,CAAT;AAgCA,sBACE,oBAAC,KAAD,oBACM9C,IADN;AAEE,IAAA,KAAK,EAAC,OAFR;AAGE,IAAA,MAAM,EAAC,OAHT,CAIE;AACA;AALF;AAME,IAAA,gBAAgB,EACdA,IAAI,CAACW,MAAL,GACI,MAAM;AACJ;AACD,KAHL,GAIKoC,YAAD,IAAkB9C,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAW,SAAG+C;AAAd,KAAD,CAXjC,CAaE;AAbF;AAcE,IAAA,QAAQ,EAAC,gCAdX;AAeE,IAAA,oBAAoB,EAAE1B,OAAO,CAACC,GAAR,CAAY0B,sBAfpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAiBE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEpC,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,eAkBE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AACE,IAAA,IAAI,EAAEZ,IADR;AAEE,IAAA,OAAO,EAAEC,OAFX;AAGE,IAAA,eAAe,EAAEa,eAHnB;AAIE,IAAA,YAAY,EAAEI,YAJhB;AAKE,IAAA,MAAM,EAAElB,IAAI,CAACW,MALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAUGX,IAAI,CAACW,MAAL,GACC,MAAM;AACJ;AACD,GAHF,gBAKC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfJ,eAiBE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,eAkBE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBF,CAlBF,CADF;AAyCD;;AAED,eAAeZ,OAAf","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport MapGL, { FlyToInterpolator } from \"react-map-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\n\nimport request from \"../Axios/request\";\nimport InputBox from \"./InputBoxGrid\";\nimport Marker from \"./Marker/Marker\";\nimport Sliderbar from \"./Slidebar/Sliderbar\";\nimport Footer from \"./Footer/Footer\";\nimport \"./compose.scss\";\n\n// import Chart from \"../Chart/chart\"\nimport dotenv from \"dotenv\";\ndotenv.config();\n\nfunction Compose() {\n  const [info, setInfo] = useState({\n    longitude: 127.024612,\n    latitude: 37.5326,\n    zoom: 5.5,\n    pitch: 0,\n    bearing: 0,\n    transitionInterpolator: new FlyToInterpolator({ speed: 1.2 }),\n    transitionDuration: 1000,\n    searchInfo: \"\",\n    isMain: true,\n  });\n  const [userData, setUserData] = useState([])\n\n  const mainSearchInput = useCallback(\n    (vp) => {\n      setInfo({\n        ...info,\n        searchInfo: vp.target.value,\n      });\n    },\n    [info]\n  );\n\n  const goToViewPort = useCallback(() => {\n    request(\"get\", `https://maps.googleapis.com/maps/api/geocode/json`, {\n      address: info.searchInfo,\n      key: process.env.REACT_APP_Google_Token,\n    })\n      .then((res) => {\n        setInfo({\n          ...info,\n          isMain: false,\n          latitude: res.data.results[0].geometry.location.lat,\n          longitude: res.data.results[0].geometry.location.lng,\n          zoom: 14,\n          transitionInterpolator: new FlyToInterpolator(),\n          transitionDuration: 1000,\n        });\n      })\n      .catch((res) => {\n        console.log(res);\n      });\n  }, [info]);\n\n  useEffect(() => {\n    if (info.isMain && info.longitude <= 128) {\n      const interval = setInterval(() => {\n        setInfo({\n          ...info,\n          latitude: info.latitude + 0.005,\n          longitude: info.longitude + 0.005,\n        });\n      }, 50);\n      return () => clearInterval(interval);\n    }\n    return;\n  }, [info]);\n\n  useEffect(() => {\n    request(\"post\", `http://localhost:3013/covid19/data/user`, {\n      user_data: [{\n        province: \"Seoul\",\n        city: \"Yongsan-gu\",\n        group: \"TRUE\",\n        infection_case: \"Itaewon Clubs\",\n        confirmed: 139,\n        latitude: 37.538621,\n        longitude: 126.992652,\n        time: \"UTF로 해주세요\",\n        name: \"hochan\"\n      },{\n        province: \"Seoul\",\n        city: \"Gwanak-gu\",\n        group: \"TRUE\",\n        infection_case: \"Richway\",\n        confirmed: 119,\n        latitude: 37.48208,\n        longitude: 126.901384,\n        time: \"UTF로 해주세요\",\n        name: \"Jamin\"\n      }]\n    })\n      .then((res) => {\n        setUserData(res.data)\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  },[]);\n\n  return (\n    <MapGL\n      {...info}\n      width=\"100vw\"\n      height=\"100vh\"\n      // mapStyle=\"mapbox://styles/holee/ckcmzzc5y24hb1ip8lnkdt8sq\"\n      // mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_THEME}\n      onViewportChange={\n        info.isMain\n          ? () => {\n              \"\";\n            }\n          : (nextViewport) => setInfo({ ...info, ...nextViewport })\n      }\n      // mapStyle=\"mapbox://styles/mapbox/streets-v11\"\n      mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n      mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\n    >\n      <Marker userData={userData}/>\n      <div className=\"container\">\n        <div className=\"item\">\n          <InputBox\n            info={info}\n            setInfo={setInfo}\n            mainSearchInput={mainSearchInput}\n            goToViewPort={goToViewPort}\n            isMain={info.isMain}\n          />\n        </div>\n        {info.isMain ? (\n          () => {\n            \"\";\n          }\n        ) : (\n          <Sliderbar />\n        )}\n        <Footer />\n        <Chart/>\n      </div>\n    </MapGL>\n  );\n}\n\nexport default Compose;\n"]},"metadata":{},"sourceType":"module"}